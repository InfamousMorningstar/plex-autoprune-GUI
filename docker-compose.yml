# =============================================================================
# Plex Auto-Prune - One-Click Deploy
# =============================================================================
# Just run: docker-compose up -d
# Then open: http://localhost:5000
# Login with Plex and you're done!
# =============================================================================

services:
  plex-auto-prune-gui:
    build: .
    image: plex-auto-prune:latest
    container_name: plex-auto-prune-gui
    restart: unless-stopped
    ports:
      - "5000:8080"
    volumes:
      - plex-auto-prune-state:/app/state
      - plex-auto-prune-email:/app/email_templates
    environment:
      - TZ=America/New_York  # Change to your timezone
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

# Named volumes persist across container recreations/redeployments
volumes:
  plex-auto-prune-state:
  plex-auto-prune-email:
